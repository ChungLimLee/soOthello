<!--
	Copyright (c) 2025 Chung Lim Lee and Savvy Open
	All rights reserved.
-->





<html>



<head>
	<title>SO Othello - unlimited endgame puzzles</title>
	<meta name="viewport" content="width=device-width">
</head>



<body>

<script>const _version$ = '1.0.1.a';</script>

<script src='modal box.js?v=' + _version$></script>

<link rel="stylesheet" href="view.css?v=" + _version$>

<script src='favourites.js?v=' + _version$></script>
<script src='setup.js?v=' + _version$></script>
<script src='view.js?v=' + _version$></script>

<script src='move.js?v=' + _version$></script>
<script src='ai.js?v=' + _version$></script>
<script src='share.js?v=' + _version$></script>



<center>
<div id='master_view' class='center'>

<button style='margin-right:13px; font-weight: bold;' onclick='game.menu();'>Menu</button>
<div id='disk_info1' style='display:inline-block;'>
	Move(s) Made: 0
</div>
<button style='margin-left:13px;' onclick='game.highlight_good_moves();'>Hint</button>
<br>

<div id='disk_info2' style='margin-bottom: 8px;'>
	Black: 2, White: 2
</div>


<div id='board_view' style='margin-bottom:12px;'></div>

<button style='margin-right: 20px;' onclick='game.undo();'>< Undo</button>
<button onclick='game.share_menu();' style='font-weight: bold; background-color: #ffff88;'>Share</button>
<button style='margin-left: 20px;' onclick='game.redo();'>Redo ></button>

</div>
</center>





<script>

// ********** MAIN **********

var board = new Board(8, 'board_view');
var game = new Game(8, board);

game.board.adjust_view();
game.start('black');



// check if any user game input to process

var url = new URL(window.location.href);
var user_play_line = url.searchParams.get('play');

if (user_play_line !== null) {

	var user_game_modal = new modal_box$({z_index: 1});
	
	var result = game.input(user_play_line);
	
	if (result === true) {

		user_game_modal.show(`
		
			<center style='padding: 0px 15px 30px 15px'>
				<b>Game Invitation</b>
				<br><br>
				You are challenged to solve this puzzle.
			</center>
			
		`, {width: '280px'});
		
		game.set_game_mode('play');
	}
	
	else {
	
		user_game_modal.show(`
		
			<center style='padding: 0px 15px 30px 15px'>
				<b>Invalid Game Input</b>
				<br><br>
				It must be between the moves 48 to 60.
			</center>
			
		`, {width: '220px', background_color: '#ff8888'});
	}
}
	


// display normal startup when no user specific play line or user game rejected

if (user_play_line === null || result === false) {

	modal_window_show(`

		<center style='padding: 30px 15px 30px 15px;'>

		<b>SO Othello - endgame puzzles</b>
		<br>
		v1.0.1
		<br><br>

		<button class='highlight_go_play' onclick='game.new_puzzle();'>Go Play</button>
		<br><br>
		
		<div style='color: #555555;'>
		Each puzzle starts after 48 moves have been made.
		<br><br>
		Always begins with one winning move and may also have draw move(s).
		<br><br>
		Use the "Hint" button to reveal the <span style='background-color: #99ff99'>winning</span> and/or <span style='background-color: #ccccff'>draw</span> move(s).
		</div>

		</center>
		
		<center>
		<div style='font-size: 15px; background-color: #cccccc; color: #555555; padding: 8px; cursor: pointer;' onclick='external_link_confirmation("https://github.com/ChungLimLee/soOthello")'>
		© 2025 Savvy Open
		</div>
		</center>
	`,{	
		close_button: false,
		must_respond: true
	});
}





// EXTERNAL LINK CONFIRMATION

var external_link_confirmation_modal = new modal_box$({z_index: 1});

function external_link_confirmation(link) {

	external_link_confirmation_modal.show(`
	
		<center style='padding: 0px 15px 15px 15px;'>
			<b>This is an online activity:</b>
			<br><br>
			Open this link?
			<br>
			<div style='overflow-x: scroll; margin-top: 15px;'>${link}</div>
			<br>
			<a href='${link}' target='_blank'><button class='button' onclick='external_link_confirmation_modal.close();'>Yes</button></a>
			<button class='button' onclick='external_link_confirmation_modal.close();'>No</button>
		</center>
		
	`, {background_color: '#f0f0f0', width: '250px'});
}



</script>
</body>
</html>